{% extends 'base.html' %}
{% load staticfiles %}
{% block title %} <title>{% if services_obj %}Редактировать {% else %}Добавить {% endif %}услугу - Comfortable Home</title>{% endblock %}
{% block breadcrumb %}
<div class="page-header">
        <h2 class="pageheader-title">{% if services_obj %}Редактировать {% else %}Добавить {% endif %} адрес</h2>
    <div class="page-breadcrumb">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li  class="breadcrumb-item"><a href="{% url 'catalog:services_list' %}">Адреса</a></li>
                <li class="breadcrumb-item active" aria-current="page">{% if address_obj %}Редактировать {% else %}Добавить {% endif %} адрес</li>
            </ol>
        </nav>
    </div>
</div>
{% endblock %}
{% block extralinks %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
{% endblock %}
{% block content %}
  <form id="formid" action='' method="POST" novalidate>
    <div class="overview_form_block row marl ">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <div class="row marl">
              <div class="col-md-12">
                <div class="filter_col col-md-12">
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="required">Имя услуги{% if service_form.name_of_service.field.required %}<span class="error">*</span>{% endif %}</label>
                    {{ service_form.name_of_service }}
                    <span class="error">{{ service_form.name_of_service.errors }}</span>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="required">Задолженность на начало периода{% if service_form.debt_at_beg_of_period.field.required %}<span class="error">*</span>{% endif %}</label>
                    {{ service_form.debt_at_beg_of_period }}
                    <span class="error">{{ service_form.debt_at_beg_of_period.errors }}</span>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="required">Начислено{% if service_form.accrued.field.required %}<span class="error">*</span>{% endif %}</label>
                    {{ service_form.accrued }}
                    <span class="error">{{ service_form.accrued.errors }}</span>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="required">Перерасчёты{% if service_form.recalculations.field.required %}<span class="error">*</span>{% endif %}</label>
                    {{ service_form.recalculations }}
                    <span class="error">{{ service_form.recalculations.errors }}</span>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="required">Оплачено{% if service_form.paid.field.required %}<span class="error">*</span>{% endif %}</label>
                    {{ service_form.paid }}
                    <span class="error">{{ service_form.paid.errors }}</span>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputEmail1" class="required">Задолженность на конец периода{% if service_form.debt_at_end_of_period.field.required %}<span class="error">*</span>{% endif %}</label>
                    {{ service_form.debt_at_end_of_period }}
                    <span class="error">{{ service_form.debt_at_end_of_period.errors }}</span>
                  </div>
                </div>
              </div>
            </div>
            <br clear="all">
          </div>
        <div class="card-footer  p-0 text-left d-flex justify-content-center">
            <div class="card-footer-item card-footer-item-bordered">
                <button class="btn btn-default save" type="submit">Сохранить</button>
            </div>
            {% if not account_obj %}
            <div class="card-footer-item card-footer-item-bordered">
                <button class="btn btn-default save savenew" type="submit">Сохранить и добавить ещё</button>
            </div>
            {% endif %}
            <div class="card-footer-item card-footer-item-bordered">
                <a href="{% url 'catalog:services_list' %}" class="btn btn-default clear">Отмена</a>
            </div>
        </div>
        </div>
      </div>
      <br clear="all">
      <input type="hidden" id="save_new_form" name="savenewform">
    </div>
  </form>
{% endblock %}
{% block js_block %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
  <script type="text/javascript">
    $(".savenew").on('click', function(e){
      e.preventDefault()
      $("#save_new_form").val('true')
      $('#formid').submit()
    });
  </script>
{% endblock js_block %}
{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
    <form id="formid" action='' method="POST" novalidate>
        <div class="overview_form_block row marl ">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-body">
                        <div class="card-title text-center">
                            {% if entry_obj %}Изменить{% else %}Создать{% endif %} Новость
                        </div>
                        <div class="row marl">
                            <div class="col-md-12">
                                <div class="filter_col col-md-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1" class="required">Заголовок
                                            {% if entry_form.title.field.required %}
                                                <span class="error">*</span>{% endif %}</label>
                                        {{ entry_form.title }}
                                        <span class="error">{{ entry_form.title.errors }}</span>
                                    </div>
                                </div>
                                <div class="filter_col col-md-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1" class="required">Текст новости
                                            {% if entry_form.text.field.required %}
                                                <span class="error">*</span>{% endif %}</label>
                                        {{ entry_form.text }}
                                        <span class="error">{{ entry_form.text.errors }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br clear="all">
                    </div>
                </div>
            </div>
            <br clear="all">
            <input type="hidden" id="save_new_form" name="savenewform">
        </div>
        <!-- overview ends here -->
        <div class="row marl buttons_row text-center form_btn_row">
            <button class="btn btn-default save" type="submit">Сохранить</button>
            {% if not entry_obj %}
                <button class="btn btn-default save savenew" type="submit">Сохранить и добавить ещё</button>
            {% endif %}
            <a href="{% url 'news:list' %}" class="btn btn-default clear">Отмена</a>
        </div>
    </form>
{% endblock %}

{% block js_block %}
  <script type="text/javascript">
    $(".savenew").on('click', function(e){
      e.preventDefault();
      $("#save_new_form").val('true');
      $('#formid').submit();
    });
  </script>
{% endblock js_block %}